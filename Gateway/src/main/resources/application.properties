# Internal port (mapped to 8090 in docker-compose)
server.port=8080
spring.application.name=msvc-gateway

# --- ROUTING CONFIGURATION ---

# Routes for Product Microservice
# Access via: http://localhost:8090/api/products/**
spring.cloud.gateway.routes[0].id=product-service
spring.cloud.gateway.routes[0].uri=lb://product-service
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/products/**

# Routes for Item Microservice
# Access via: http://localhost:8090/api/items/**
spring.cloud.gateway.routes[1].id=item-service
spring.cloud.gateway.routes[1].uri=lb://item-service
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/items/**

# --- SERVICE DISCOVERY (EUREKA) ---

# Enables the Gateway to find services by their names in Eureka
spring.cloud.gateway.discovery.locator.enabled=true
spring.cloud.gateway.discovery.locator.lower-case-service-id=true

# Eureka Server URL (Using the service name defined in docker-compose)
eureka.client.service-url.defaultZone=http://eureka-server:8761/eureka/
eureka.instance.prefer-ip-address=true

# --- 2026 OPTIMIZATION ---

# Enable Virtual Threads (Project Loom) for high-concurrency performance
spring.threads.virtual.enabled=true